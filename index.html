<!DOCTYPE html>
<html lang="fa" dir="rtl" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ÙˆØ¨Ø³Ø§ÛŒØª Ø´Ø®ØµÛŒ AM1R-DRAGON</title>
<meta name="theme-color" content="#0d0d0f" />
<style>
/* ===== THEME (Dark/Light) ===== */
:root{
  --bg:#0d0d0f; --bg-2:#141419; --card:#151519; --ring:#24242c;
  --text:#e8eaed; --muted:#a7adb5; --acc:#f5c044; --danger:#ff4d4f; --link:#7bdcff;
}
:root[data-theme="light"]{
  --bg:#fafafa; --bg-2:#ffffff; --card:#ffffff; --ring:#e6e6e6;
  --text:#0f1115; --muted:#4b5563; --acc:#eab308; --danger:#e11d48; --link:#0369a1;
}

/* ===== RESET & TYPO ===== */
*{box-sizing:border-box}
html,body{margin:0}
body{
  font-family:Tahoma,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  line-height:1.9; font-size:18px; font-weight:600; /* Ø¨Ø±Ø¬Ø³ØªÙ‡ Ùˆ Ø¨Ø²Ø±Ú¯ */
}
/* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ù¾ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ */
body{ user-select:none; -webkit-user-select:none; }
#about{ user-select:text; -webkit-user-select:text; } /* ÙÙ‚Ø· Ù…Ø¹Ø±ÙÛŒ Ù…Ù† Ù‚Ø§Ø¨Ù„ Ú©Ù¾ÛŒ */
a{color:var(--link); text-decoration:none}
h1,h2,h3{margin:0 0 12px 0; font-weight:800}
h2{font-size:24px}

/* ===== LAYOUT ===== */
.topbar{
  position:sticky; top:0; z-index:1000;
  background:rgba(10,10,12,.85); backdrop-filter:blur(8px);
  border-bottom:1px solid var(--ring);
}
[data-theme="light"] .topbar{ background:rgba(255,255,255,.8); }
.nav{
  max-width:1200px; margin:auto; padding:10px 16px;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
}
.brand{display:flex; align-items:center; gap:10px}
.logo{
  width:32px; height:32px; border-radius:8px; background:linear-gradient(135deg,#1a1a22,#000);
  border:1px solid #333; display:grid; place-items:center; color:var(--acc); font-weight:900; font-size:13px;
}
.brand .sub{font-size:12px; color:var(--muted)}
.btn{border:0; cursor:pointer; padding:8px 12px; border-radius:12px; font-weight:800}
.btn-ghost{background:#1b1b22; color:var(--text); border:1px solid var(--ring)}
.btn-primary{background:var(--acc); color:#000}
.btn-danger{background:var(--danger); color:#fff}
[data-theme="light"] .btn-ghost{background:#f3f4f6; color:#111827}
.menu-toggle{font-size:22px; cursor:pointer; user-select:none; padding:6px 10px; border-radius:10px; background:#1b1b22; border:1px solid var(--ring)}
[data-theme="light"] .menu-toggle{background:#f3f4f6}

.menu{
  position:absolute; right:16px; top:58px; width:260px; display:none; flex-direction:column; overflow:hidden;
  background:var(--bg-2); border:1px solid var(--ring); border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.menu a{padding:12px 14px; border-bottom:1px solid var(--ring); color:var(--text)}
.menu a:hover{background:#1b1b22}
[data-theme="light"] .menu a:hover{background:#f3f4f6}

main{max-width:1200px; margin:24px auto; padding:0 16px}
section{margin:22px 0}
.card{
  background:linear-gradient(180deg,var(--bg-2),var(--card));
  border:1px solid var(--ring); border-radius:18px; padding:18px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}
.grid{display:grid; gap:12px}
.g-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.g-3{grid-template-columns:repeat(3,minmax(0,1fr))}
@media (max-width:900px){ .g-3{grid-template-columns:1fr 1fr} }
@media (max-width:640px){ .g-2,.g-3{grid-template-columns:1fr} }
.chip{padding:6px 10px; border-radius:999px; background:#1b1b22; font-size:12px; color:var(--muted); border:1px solid var(--ring)}
.inp, textarea, select{
  width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--ring);
  background:#0f0f13; color:var(--text); outline:none; font-weight:700
}
[data-theme="light"] .inp, [data-theme="light"] textarea, [data-theme="light"] select{ background:#fff; color:#0f1115 }
textarea{min-height:100px; resize:vertical}
footer{padding:22px; text-align:center; color:var(--muted); border-top:1px solid var(--ring); margin-top:28px}
.hint{font-size:12px; color:var(--muted)}

/* ===== PROFILE ===== */
.profile-wrap{display:grid; place-items:center; gap:12px}
.profile-img{
  width:180px; height:180px; border-radius:50%; object-fit:cover;
  border:4px solid var(--acc); box-shadow:0 8px 24px rgba(245,192,68,.25); background:#000;
}
.carousel-ctrls{display:flex; gap:8px; align-items:center}

/* ===== GALLERY ===== */
.gallery{display:grid; gap:12px}
.gallery .item{position:relative}
.gallery img{width:100%; border-radius:14px; border:1px solid var(--ring); background:#000; transition:transform .25s}
.gallery img:hover{transform:translateY(-4px)}
.gallery .cap{position:absolute; inset:auto 8px 8px 8px; background:rgba(0,0,0,.55); padding:6px 10px; border-radius:10px; font-size:12px}

/* ===== BLOG ===== */
.post{background:#101015; border:1px solid var(--ring); border-radius:14px; padding:12px}
.post .meta{font-size:12px; color:var(--muted)}

/* ===== SHOP ===== */
.product{display:flex; justify-content:space-between; align-items:center;
         padding:12px; border-radius:14px; background:#101015; border:1px solid var(--ring)}
.price{font-weight:900; color:var(--acc)}

/* ===== CONTACT ===== */
.actions{display:grid; gap:10px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.action{display:flex; align-items:center; justify-content:center; gap:10px;
        background:#101015; border:1px solid var(--ring); border-radius:14px; padding:12px; font-weight:800}

/* ===== COMMENTS ===== */
.c-list{display:grid; gap:10px}
.comment{background:#101015; border:1px solid var(--ring); border-radius:14px; padding:12px}
.c-meta{display:flex; justify-content:space-between; align-items:center; font-size:12px; color:var(--muted)}
.c-actions{display:flex; gap:8px}
.badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:#1b1b22; border:1px solid var(--ring)}

/* ===== RATE (5) ===== */
.stars{display:flex; gap:6px; font-size:28px; cursor:pointer}
.stars .on{color:var(--acc)}

/* ===== LEADERBOARD ===== */
.board .row{display:flex; justify-content:space-between; padding:10px; border-bottom:1px dashed #262630}

/* ===== MODAL ===== */
.modal{
  position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.55);
  z-index:2000; padding:16px;
}
.modal .panel{
  width:min(560px,100%); background:var(--bg-2); border:1px solid var(--ring); border-radius:18px; padding:18px;
}

/* ===== SECRET ACCESS (hidden dash) ===== */
.secret{
  display:none;
}
.lock-mini{
  position:fixed; left:10px; bottom:12px; z-index:1200;
  opacity:.6; cursor:pointer; font-size:12px; padding:6px 10px; border-radius:999px;
  background:#1b1b22; border:1px solid var(--ring);
}
.lock-mini:hover{opacity:1}
</style>
</head>
<body>

<!-- ===== Header ===== -->
<div class="topbar">
  <div class="nav">
    <div class="brand">
      <div class="logo">AD</div>
      <div>
        <div>ÙˆØ¨Ø³Ø§ÛŒØª Ø´Ø®ØµÛŒ <b>AM1R-DRAGON</b></div>
        <div class="sub" id="welcomeLine">Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ!</div>
      </div>
    </div>
    <div class="auth" style="display:flex;align-items:center;gap:8px">
      <button class="btn btn-ghost" id="themeBtn" title="Ø­Ø§Ù„Øª Ø±ÙˆØ²/Ø´Ø¨">ğŸŒ™</button>
      <span id="whoami" class="sub"></span>
      <button class="btn btn-ghost" id="btnLogin" onclick="openAuth()">ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
      <button class="btn btn-danger" id="btnLogout" style="display:none" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
      <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
    </div>
  </div>
  <div class="menu" id="menu">
    <a href="#home">Ø®Ø§Ù†Ù‡</a>
    <a href="#profile">Ù¾Ø±ÙˆÙØ§ÛŒÙ„</a>
    <a href="#about">Ù…Ø¹Ø±ÙÛŒ Ù…Ù†</a>
    <a href="#gallery">Ú¯Ø§Ù„Ø±ÛŒ</a>
    <a href="#blog">Ø¨Ù„Ø§Ú¯</a>
    <a href="#shop">ÙØ±ÙˆØ´Ú¯Ø§Ù‡</a>
    <a href="#comments">Ù†Ø¸Ø±Ø§Øª</a>
    <a href="#rules">Ù‚ÙˆØ§Ù†ÛŒÙ†</a>
    <a href="#contact">Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ù†</a>
    <a href="#rate">Ø§Ù…ØªÛŒØ§Ø²</a>
    <a href="#board">Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„</a>
    <!-- ØµÙØ­Ù‡ Ø¢Ù…Ø§Ø± Ø¹Ù…Ø¯Ø§Ù‹ Ø¯Ø± Ù…Ù†Ùˆ Ù†ÛŒØ³Øª -->
  </div>
</div>

<main>
  <!-- ===== Home (Ø¨Ø¯ÙˆÙ† Ù…ØªÙ† Ø§Ø¶Ø§ÙÛŒ) ===== -->
  <section id="home" class="card">
    <h2>AM1R-DRAGON â€” Welcome</h2>
  </section>

  <!-- ===== Profile + User Panel ===== -->
  <section id="profile" class="card">
    <h2>Ù¾Ø±ÙˆÙØ§ÛŒÙ„</h2>
    <div class="profile-wrap">
      <img id="profilePic" class="profile-img"
           src="https://i.ibb.co/jGspv3J/photo-2025-02-22-19-12-32.jpg"
           alt="Ù¾Ø±ÙˆÙØ§ÛŒÙ„ AM1R-DRAGON" />
      <div class="carousel-ctrls" style="gap:12px;flex-wrap:wrap;justify-content:center">
        <span class="chip" id="userDisplay">Ú©Ø§Ø±Ø¨Ø± Ù…Ù‡Ù…Ø§Ù†</span>
        <label class="btn btn-ghost" for="fileAvatar">ØªØºÛŒÛŒØ± Ø¹Ú©Ø³</label>
        <input id="fileAvatar" type="file" accept="image/*" style="display:none" />
        <button class="btn btn-primary" onclick="openUserPanel()">ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</button>
      </div>
    </div>
  </section>

  <!-- ===== About (ØªÙ†Ù‡Ø§ Ø¨Ø®Ø´ Ù‚Ø§Ø¨Ù„ Ú©Ù¾ÛŒ) ===== -->
  <section id="about" class="card">
    <h2>Ù…Ø¹Ø±ÙÛŒ Ù…Ù†</h2>
    <p>
      Ø³Ù„Ø§Ù…! Ù…Ù† Ø§Ù…ÛŒØ± Ù‡Ø³ØªÙ…ØŒ ÙˆÙ„ÛŒ ØªÙˆÛŒ ÙØ¶Ø§ÛŒ Ù…Ø¬Ø§Ø²ÛŒ Ø¨ÛŒØ´ØªØ± Ø¨Ø§ Ø§Ø³Ù… <b>Ø§Ù…ÛŒØ± Ø¯Ø±Ø§Ú¯ÙˆÙ†</b> Ù…Ù†Ùˆ Ù…ÛŒâ€ŒØ´Ù†Ø§Ø³Ù†.
      Û±Û¸ Ø³Ø§Ù„Ù…Ù‡ Ùˆ ØªÙ‡Ø±Ø§Ù† Ø²Ù†Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù…. Ø§Ø³ØªØ§ÛŒÙ„Ù… Ø¨ÛŒØ´ØªØ± Ø³Ù…Øª Ú©Ù„Ø§Ø³ÛŒÚ©Ù‡ Ùˆ Ø¹Ø§Ø´Ù‚ Ø±Ù†Ú¯ Ù…Ø´Ú©ÛŒâ€ŒØ§Ù….
      Ø³Ø±Ú¯Ø±Ù…ÛŒâ€ŒÙ‡Ø§Ù…ØŸ Ø¯ÛŒØ¯Ù† Ø§Ù†ÛŒÙ…Ù‡ØŒ Ú¯ÛŒÙ… Ø²Ø¯Ù† Ùˆ ÙˆØ±Ø²Ø´ Ú©Ø±Ø¯Ù† ğŸ‘¾âš¡ï¸
      Ø§Ù„Ø¨ØªÙ‡ Ø¨ÛŒØ´ØªØ± ÙˆÙ‚Øªâ€ŒÙ‡Ø§Ù… Ø³Ø± Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ¯Ø°Ø±Ù‡ØŒ ÙˆÙ„ÛŒ Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø±Ø§ÛŒ Ú†ÛŒØ²Ø§ÛŒÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù… ÙˆÙ‚Øª Ø¨Ø°Ø§Ø±Ù….
    </p>
  </section>

  <!-- ===== Gallery (Historic Iran) ===== -->
  <section id="gallery" class="card">
    <h2>Ú¯Ø§Ù„Ø±ÛŒ â€” Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ ØªØ§Ø±ÛŒØ®ÛŒ Ø§ÛŒØ±Ø§Ù†</h2>
    <div class="gallery g-3">
      <figure class="item">
        <img src="https://placehold.co/800x540?text=Persepolis+%28Takht-e+Jamshid%29" alt="ØªØ®Øª Ø¬Ù…Ø´ÛŒØ¯">
        <figcaption class="cap">ØªØ®Øª Ø¬Ù…Ø´ÛŒØ¯ â€” Ø´ÛŒØ±Ø§Ø²</figcaption>
      </figure>
      <figure class="item">
        <img src="https://placehold.co/800x540?text=Naqsh-e+Jahan+Square" alt="Ù…ÛŒØ¯Ø§Ù† Ù†Ù‚Ø´ Ø¬Ù‡Ø§Ù†">
        <figcaption class="cap">Ù…ÛŒØ¯Ø§Ù† Ù†Ù‚Ø´ Ø¬Ù‡Ø§Ù† â€” Ø§ØµÙÙ‡Ø§Ù†</figcaption>
      </figure>
      <figure class="item">
        <img src="https://placehold.co/800x540?text=Nasir+al-Mulk+Mosque" alt="Ù…Ø³Ø¬Ø¯ Ù†ØµÛŒØ±Ø§Ù„Ù…Ù„Ú©">
        <figcaption class="cap">Ù…Ø³Ø¬Ø¯ Ù†ØµÛŒØ±Ø§Ù„Ù…Ù„Ú© â€” Ø´ÛŒØ±Ø§Ø²</figcaption>
      </figure>
      <figure class="item">
        <img src="https://placehold.co/800x540?text=Tomb+of+Cyrus" alt="Ù…Ù‚Ø¨Ø±Ù‡ Ú©ÙˆØ±ÙˆØ´">
        <figcaption class="cap">Ù…Ù‚Ø¨Ø±Ù‡ Ú©ÙˆØ±ÙˆØ´ â€” Ù¾Ø§Ø³Ø§Ø±Ú¯Ø§Ø¯</figcaption>
      </figure>
      <figure class="item">
        <img src="https://placehold.co/800x540?text=Takht-e+Soleyman" alt="ØªØ®Øª Ø³Ù„ÛŒÙ…Ø§Ù†">
        <figcaption class="cap">ØªØ®Øª Ø³Ù„ÛŒÙ…Ø§Ù† â€” ØªÚ©Ø§Ø¨</figcaption>
      </figure>
    </div>
  </section>

  <!-- ===== Blog ===== -->
  <section id="blog" class="card">
    <h2>Ø¨Ù„Ø§Ú¯</h2>
    <div class="grid g-2" id="blogList">
      <article class="post">
        <h3>Ø´Ø±ÙˆØ¹ Ù…Ø³ÛŒØ± Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ Ù…Ù†</h3>
        <div class="meta">Û±Û´Û°Û´/Û°Û¶/Û°Û´ â€¢ Û² Ø¯Ù‚ÛŒÙ‚Ù‡</div>
        <p>Ø§ÛŒÙ†Ø¬Ø§ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø³ÛŒØ±Ù… Ù…ÛŒâ€ŒÙ†ÙˆÛŒØ³Ù…Ø› Ø§Ø² HTML/CSS Ø³Ø§Ø¯Ù‡ ØªØ§ Ø³Ø§Ø®Øª Ø§Ù¾â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒâ€¦</p>
      </article>
      <article class="post">
        <h3>Ú†Ø±Ø§ Ù…Ø´Ú©ÛŒØŸ ğŸ©</h3>
        <div class="meta">Û±Û´Û°Û´/Û°Û¶/Û°Û³ â€¢ Û± Ø¯Ù‚ÛŒÙ‚Ù‡</div>
        <p>Ø§Ø³ØªØ§ÛŒÙ„ Ú©Ù„Ø§Ø³ÛŒÚ© + Ø±Ù†Ú¯ Ù…Ø´Ú©ÛŒ = ØªØ±Ú©ÛŒØ¨ Ù…ÙˆØ±Ø¯Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…. Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„ØŒ ØªÙ…ÛŒØ²ØŒ Ù‡Ù…ÛŒØ´Ù‡ Ø´ÛŒÚ©.</p>
      </article>
    </div>
  </section>

  <!-- ===== Shop ===== -->
  <section id="shop" class="card">
    <h2>ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h2>
    <div class="grid">
      <div class="product">
        <div>Ø³Ø§Ø®ØªÙ† Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡ ØªØ§ Ú©Ù…ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</div>
        <div class="price">Û±Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</div>
      </div>
      <div class="product">
        <div>ØªØ¨Ù„ÛŒØºØ§Øª Ø¯Ø§Ø®Ù„ Ø³Ø§ÛŒØª</div>
        <div class="price">Ù‚ÛŒÙ…Øª ØªÙˆØ§ÙÙ‚ÛŒ</div>
      </div>
      <div class="product">
        <div>Ø³Ø§Ø®Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯ ÛŒØ§ iOS (Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ø³Ø®ØªÛŒ)</div>
        <div class="price">Ù‚ÛŒÙ…Øª ØªÙˆØ§ÙÙ‚ÛŒ</div>
      </div>
    </div>
  </section>

  <!-- ===== Comments + Bot ===== -->
  <section id="comments" class="card">
    <h2>Ù†Ø¸Ø±Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h2>
    <div class="grid">
      <textarea id="cText" placeholder="Ù†Ø¸Ø± Ø®ÙˆØ¯ØªÙˆ Ø¨Ù†ÙˆÛŒØ³..."></textarea>
      <div class="g-2 grid">
        <input id="cName" class="inp" placeholder="Ù†Ø§Ù… (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)" />
        <button class="btn btn-primary" onclick="addComment()">Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±</button>
      </div>
    </div>
    <div class="c-list" id="cList"></div>
  </section>

  <!-- ===== Rules ===== -->
  <section id="rules" class="card">
    <h2>Ù‚ÙˆØ§Ù†ÛŒÙ† Ø³Ø§ÛŒØª</h2>
    <ul class="rules">
      <li>Ø§Ø­ØªØ±Ø§Ù… Ø¨Ù‡ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.</li>
      <li>Ø§Ø±Ø³Ø§Ù„ Ù…Ø­ØªÙˆØ§ÛŒ ØªÙˆÙ‡ÛŒÙ†â€ŒØ¢Ù…ÛŒØ² ÛŒØ§ Ø®Ù„Ø§Ù Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ù…Ù†ÙˆØ¹ Ø§Ø³Øª.</li>
      <li>Ø±Ø¹Ø§ÛŒØª Ø­Ù‚ÙˆÙ‚ Ú©Ù¾ÛŒâ€ŒØ±Ø§ÛŒØª Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.</li>
      <li>Ø§Ø² Ø§Ø³Ù¾Ù… Ø®ÙˆØ¯Ø¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯Ø› ØªØ¹Ø§Ù…Ù„ Ù…ÙÛŒØ¯ Ø§Ù…ØªÛŒØ§Ø² Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</li>
    </ul>
  </section>

  <!-- ===== Contact ===== -->
  <section id="contact" class="card">
    <h2>Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ù†</h2>
    <div class="actions">
      <a class="action" href="https://t.me/AM1R_DRAGON" target="_blank" rel="noopener">ØªÙ„Ú¯Ø±Ø§Ù… @AM1R_DRAGON</a>
      <a class="action" href="https://rubika.ir/AM1R_DRAGON" target="_blank" rel="noopener">Ø±ÙˆØ¨ÛŒÚ©Ø§ AM1R_DRAGON</a>
    </div>
  </section>

  <!-- ===== Rate (5) ===== -->
  <section id="rate" class="card">
    <h2>Ø¨Ù‡ Ø³Ø§ÛŒØª Ú†Ù†Ø¯ Ù…ÛŒØ¯ÛŒØŸ</h2>
    <div class="stars" id="stars">
      <span data-s="1">â˜…</span><span data-s="2">â˜…</span><span data-s="3">â˜…</span><span data-s="4">â˜…</span><span data-s="5">â˜…</span>
    </div>
    <div class="hint" id="rateNote"></div>
  </section>

  <!-- ===== Leaderboard ===== -->
  <section id="board" class="card">
    <h2>Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„</h2>
    <div class="board" id="boardList"></div>
    <div class="hint">* Ø§ÛŒÙ† Ø±ØªØ¨Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ø­Ù„ÛŒ Ùˆ Ù†Ù…Ø§ÛŒØ´ÛŒ Ø§Ø³ØªØ› Ø¨Ø§ ØªØ¹Ø§Ù…Ù„ (Ù†Ø¸Ø±/Ù„Ø§ÛŒÚ©/Ø§Ù…ØªÛŒØ§Ø²) Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§ Ø¨Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ±ÙˆØ¯.</div>
  </section>

  <!-- ===== Secret Stats (Hidden) ===== -->
  <section id="stats" class="card secret">
    <h2>Ø¢Ù…Ø§Ø± Ø³Ø§ÛŒØª (Ù…Ø®ÙÛŒ)</h2>
    <div class="grid g-2">
      <div class="card">
        <h3>Ø¨Ø§Ø²Ø¯ÛŒØ¯Ù‡Ø§</h3>
        <div id="statViews">â€”</div>
      </div>
      <div class="card">
        <h3>Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ÛŒ</h3>
        <div id="statUsers">â€”</div>
      </div>
      <div class="card">
        <h3>ØªØ¹Ø¯Ø§Ø¯ Ù†Ø¸Ø±Ø§Øª</h3>
        <div id="statComments">â€”</div>
      </div>
      <div class="card">
        <h3>Ú©Ù„ Ù„Ø§ÛŒÚ©â€ŒÙ‡Ø§</h3>
        <div id="statLikes">â€”</div>
      </div>
    </div>
  </section>
</main>

<footer>Â© 2025 AM1R-DRAGON â€” ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª</footer>

<!-- ===== Tiny Lock to open secret panel ===== -->
<div class="lock-mini" onclick="openSecret()">ğŸ”’</div>

<!-- ===== Auth Modal (Advanced) ===== -->
<div class="modal" id="authModal" aria-hidden="true">
  <div class="panel">
    <h3 style="margin-top:0">ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h3>
    <div class="grid">
      <input id="uName" class="inp" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ (Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ø³Ø§ÛŒØª)" />
      <input id="uEmail" class="inp" type="email" placeholder="Ø§ÛŒÙ…ÛŒÙ„ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)" />
      <input id="uPhone" class="inp" type="tel" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)" />
      <input id="uPass" class="inp" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± (Ø­Ø¯Ø§Ù‚Ù„ Û¸ Ú©Ø§Ø±Ø§Ú©ØªØ±)" />
      <input id="uPass2" class="inp" type="password" placeholder="ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" />
      <div id="captchaWrap" class="g-2 grid">
        <input id="captchaQ" class="inp" disabled />
        <input id="captchaA" class="inp" placeholder="Ù¾Ø§Ø³Ø® Ú©Ù¾Ú†Ø§" />
      </div>
      <div class="g-2 grid">
        <button class="btn btn-primary" onclick="doLogin()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… / ÙˆØ±ÙˆØ¯</button>
        <button class="btn btn-ghost" onclick="closeAuth()">Ø§Ù†ØµØ±Ø§Ù</button>
      </div>
      <div class="hint">* Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±ÙˆÛŒ Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ (LocalStorage) Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø³Ù…Øª Ø³Ø±ÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
    </div>
  </div>
</div>

<!-- ===== User Panel Modal ===== -->
<div class="modal" id="userModal" aria-hidden="true">
  <div class="panel">
    <h3 style="margin-top:0">Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù…Ù†</h3>
    <div class="grid">
      <input id="pName" class="inp" placeholder="Ù†Ø§Ù… Ù†Ù…Ø§ÛŒØ´ÛŒ" />
      <textarea id="pBio" class="inp" placeholder="Ø¨ÛŒÙˆÚ¯Ø±Ø§ÙÛŒ Ú©ÙˆØªØ§Ù‡"></textarea>
      <input id="pPhone" class="inp" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)" />
      <div class="g-2 grid">
        <input id="pPassOld" class="inp" type="password" placeholder="Ø±Ù…Ø² ÙØ¹Ù„ÛŒ" />
        <input id="pPassNew" class="inp" type="password" placeholder="Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯ (Ø­Ø¯Ø§Ù‚Ù„ Û¸ Ú©Ø§Ø±Ø§Ú©ØªØ±)" />
      </div>
      <div class="g-2 grid">
        <button class="btn btn-primary" onclick="saveProfile()">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
        <button class="btn btn-ghost" onclick="closeUserPanel()">Ø¨Ø³ØªÙ†</button>
      </div>
    </div>
  </div>
</div>

<script>
/* ====== UTIL ====== */
const $ = s => document.querySelector(s);
const $all = s => Array.from(document.querySelectorAll(s));
function uuid(){ return Date.now().toString(36)+Math.random().toString(36).slice(2); }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g,m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }

/* ====== THEME ====== */
const THEME_KEY='am_theme';
function applyTheme(t){ document.documentElement.setAttribute('data-theme', t); localStorage.setItem(THEME_KEY, t); $('#themeBtn').textContent = (t==='dark'?'ğŸŒ™':'â˜€ï¸'); }
function toggleTheme(){ const t = document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark'; applyTheme(t); }
$('#themeBtn').addEventListener('click', toggleTheme);

/* ====== MENU ====== */
function toggleMenu(){
  const m = $('#menu');
  m.style.display = (m.style.display==='flex' ? 'none' : 'flex');
  if(m.style.display==='flex'){ m.style.flexDirection='column'; }
}
document.addEventListener('click',(e)=>{
  const m = $('#menu');
  const toggle = e.target.closest('.menu-toggle');
  if(!toggle && m.style.display==='flex' && !e.target.closest('#menu')) m.style.display='none';
});

/* ====== COPY PROTECTION (except #about) ====== */
document.addEventListener('copy', (e)=>{ 
  if(!window.getSelection().anchorNode) return;
  const sel = window.getSelection().anchorNode.parentElement;
  if(sel && sel.closest && sel.closest('#about')) return; // Ø§Ø¬Ø§Ø²Ù‡ Ú©Ù¾ÛŒ Ø¯Ø± Ù…Ø¹Ø±ÙÛŒ
  e.preventDefault(); 
});
document.addEventListener('contextmenu', (e)=>{
  const el = e.target.closest('#about');
  if(el) return; // Ø§Ø¬Ø§Ø²Ù‡ Ø±Ø§Ø³Øªâ€ŒÚ©Ù„ÛŒÚ© Ø¯Ø± Ù…Ø¹Ø±ÙÛŒ
  e.preventDefault();
});

/* ====== AUTH / USERS ====== */
const AUTH_KEY='am_user';
const USERS_KEY='am_users';
const B_KEY='am_board';
const whoami = $('#whoami'), btnLogin=$('#btnLogin'), btnLogout=$('#btnLogout'), userDisplay=$('#userDisplay');

let captchaAns = 0;
function genCaptcha(){
  const a = Math.floor(2+Math.random()*8), b = Math.floor(2+Math.random()*8);
  captchaAns = a+b; $('#captchaQ').value = `Ø­Ø§ØµÙ„ ${a} + ${b} ØŸ`;
  $('#captchaA').value = '';
}
function openAuth(){ $('#authModal').style.display='grid'; genCaptcha(); }
function closeAuth(){ $('#authModal').style.display='none'; }

function loadUsers(){ return JSON.parse(localStorage.getItem(USERS_KEY)||'[]'); }
function saveUsers(u){ localStorage.setItem(USERS_KEY, JSON.stringify(u)); }

function doLogin(){
  const name = $('#uName').value.trim();
  const email = $('#uEmail').value.trim();
  const phone = $('#uPhone').value.trim();
  const pass = $('#uPass').value.trim();
  const pass2 = $('#uPass2').value.trim();
  const cap = $('#captchaA').value.trim();
  if(!name) return alert('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù„Ø§Ø²Ù… Ø§Ø³Øª');
  if(pass.length<8) return alert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û¸ Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯');
  if(pass!==pass2) return alert('ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ù…Ø·Ø§Ø¨Ù‚Øª Ù†Ø¯Ø§Ø±Ø¯');
  if(String(captchaAns)!==cap) return alert('Ù¾Ø§Ø³Ø® Ú©Ù¾Ú†Ø§ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');

  let users = loadUsers();
  let existing = users.find(u=>u.name===name);
  if(existing){
    if(existing.pass!==pass) return alert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª');
    localStorage.setItem(AUTH_KEY, JSON.stringify(existing));
  }else{
    const u = {id:uuid(), name, email, phone, pass, score:0, bio:'', avatar:''};
    users.push(u); saveUsers(users);
    localStorage.setItem(AUTH_KEY, JSON.stringify(u));
  }
  closeAuth(); renderAuth(); bumpScore(5);
}

function logout(){ localStorage.removeItem(AUTH_KEY); renderAuth(); }

function currentUser(){
  const raw = localStorage.getItem(AUTH_KEY);
  return raw? JSON.parse(raw) : null;
}
function persistUser(u){
  let users = loadUsers();
  const i = users.findIndex(x=>x.id===u.id);
  if(i>-1){ users[i]=u; saveUsers(users); localStorage.setItem(AUTH_KEY, JSON.stringify(u)); }
}

function renderAuth(){
  const u = currentUser();
  if(u){
    whoami.textContent = "Ø³Ù„Ø§Ù…ØŒ " + u.name;
    btnLogin.style.display='inline-flex';
    btnLogout.style.display='inline-flex';
    btnLogin.style.display='none';
    userDisplay.textContent = "Ú©Ø§Ø±Ø¨Ø±: " + u.name;
    if(u.avatar){ $('#profilePic').src = u.avatar; }
  }else{
    whoami.textContent = "";
    btnLogin.style.display='inline-flex';
    btnLogout.style.display='none';
    userDisplay.textContent = "Ú©Ø§Ø±Ø¨Ø± Ù…Ù‡Ù…Ø§Ù†";
  }
}

/* ====== USER PANEL ====== */
function openUserPanel(){
  const u = currentUser();
  if(!u){ openAuth(); return; }
  $('#pName').value = u.name||'';
  $('#pBio').value = u.bio||'';
  $('#pPhone').value = u.phone||'';
  $('#userModal').style.display='grid';
}
function closeUserPanel(){ $('#userModal').style.display='none'; }
function saveProfile(){
  const u = currentUser(); if(!u) return;
  const name = $('#pName').value.trim(); if(!name) return alert('Ù†Ø§Ù… Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø®Ø§Ù„ÛŒ Ø¨Ø§Ø´Ø¯');
  const bio = $('#pBio').value.trim();
  const phone = $('#pPhone').value.trim();
  const oldp = $('#pPassOld').value.trim();
  const newp = $('#pPassNew').value.trim();
  if(newp){
    if(oldp!==u.pass) return alert('Ø±Ù…Ø² ÙØ¹Ù„ÛŒ Ø¯Ø±Ø³Øª Ù†ÛŒØ³Øª');
    if(newp.length<8) return alert('Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û¸ Ú©Ø§Ø±Ø§Ú©ØªØ±');
    u.pass=newp;
  }
  u.name=name; u.bio=bio; u.phone=phone;
  persistUser(u);
  renderAuth();
  closeUserPanel();
  alert('Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

/* Avatar upload to DataURL */
$('#fileAvatar').addEventListener('change', async (e)=>{
  const file = e.target.files[0]; if(!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    const dataURL = reader.result;
    $('#profilePic').src = dataURL;
    const u = currentUser(); if(u){ u.avatar=dataURL; persistUser(u); }
  };
  reader.readAsDataURL(file);
});

/* ====== COMMENTS with BOT ====== */
const C_KEY='am_comments';
const cList = $('#cList');
function loadComments(){ return JSON.parse(localStorage.getItem(C_KEY)||'[]'); }
function saveComments(d){ localStorage.setItem(C_KEY, JSON.stringify(d)); }
function addComment(){
  const text = $('#cText').value.trim();
  const name = ($('#cName').value.trim() || (currentUser()?.name || 'Ú©Ø§Ø±Ø¨Ø±'));
  if(!text){ alert('Ù…ØªÙ† Ù†Ø¸Ø± Ø®Ø§Ù„ÛŒÙ‡'); return; }
  const items = loadComments();
  const cid = Date.now();
  items.unshift({id:cid, name, text, like:0, replies:[]});
  saveComments(items);
  $('#cText').value=''; $('#cName').value='';
  renderComments(); bumpScore(2);
  // BOT Ù¾Ø§Ø³Ø® Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø³Ø§Ø¯Ù‡
  setTimeout(()=>autoReply(cid, text), 500);
}
function autoReply(id, text){
  const items = loadComments();
  const it = items.find(x=>x.id===id); if(!it) return;
  const t = text.toLowerCase();
  let msg = 'Ù…Ù…Ù†ÙˆÙ† Ø§Ø² Ù†Ø¸Ø±Øª ğŸŒ¹';
  if(t.includes('Ø³Ù„Ø§Ù…')) msg='Ø³Ù„Ø§Ù…! Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ ğŸ‘‹';
  if(t.includes('Ø®Ø³ØªÙ‡ Ù†Ø¨Ø§Ø´ÛŒ')||t.includes('Ø¯Ù…Øª Ú¯Ø±Ù…')) msg='Ù…Ø±Ø³ÛŒ Ø§Ø² Ø§Ù†Ø±Ú˜ÛŒ Ø®ÙˆØ¨Øª â¤ï¸';
  if(t.includes('Ú©Ù…Ú©')||t.includes('Ø±Ø§Ù‡Ù†Ù…Ø§')) msg='Ø¯Ø± Ø®Ø¯Ù…ØªØªÙ…! Ø¨Ú¯Ùˆ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ú©Ø¬Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒØŸ';
  it.replies.push({id:Date.now(), text:msg, bot:true});
  saveComments(items); renderComments();
}
function likeComment(id){
  const items = loadComments(); const it = items.find(x=>x.id===id);
  if(it){ it.like++; saveComments(items); renderComments(); bumpScore(1); }
}
function replyComment(id){
  const msg = prompt('Ù¾Ø§Ø³Ø® Ø´Ù…Ø§:'); if(!msg) return;
  const items = loadComments(); const it = items.find(x=>x.id===id);
  if(it){ it.replies.push({id:Date.now(), text:msg}); saveComments(items); renderComments(); bumpScore(1); }
}
function renderComments(){
  const items = loadComments();
  if(items.length===0){ cList.innerHTML = '<div class="hint">Ù‡Ù†ÙˆØ² Ù†Ø¸Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡â€¦</div>'; return; }
  cList.innerHTML = items.map(it=>`
    <div class="comment">
      <div class="c-meta">
        <b>${escapeHtml(it.name)}</b>
        <div class="c-actions">
          <button class="badge" onclick="likeComment(${it.id})">â¤ï¸ ${it.like}</button>
          <button class="badge" onclick="replyComment(${it.id})">ğŸ’¬ Ù¾Ø§Ø³Ø®</button>
        </div>
      </div>
      <div style="margin-top:8px">${escapeHtml(it.text)}</div>
      ${it.replies?.length? `<div style="margin-top:10px;display:grid;gap:8px">
        ${it.replies.map(r=>`<div class="badge">${r.bot?'ğŸ¤–':''} â†ª ${escapeHtml(r.text)}</div>`).join('')}
      </div>`:''}
    </div>
  `).join('');
}

/* ====== RATE (5) ====== */
const R_KEY='am_rate';
const starsEl = $('#stars'); const rateNote = $('#rateNote');
function setRate(v){ localStorage.setItem(R_KEY, String(v)); drawStars(v); rateNote.textContent = `Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯: ${v}/5`; bumpScore(1); }
function drawStars(v){ [...starsEl.children].forEach(s=> s.classList.toggle('on', Number(s.dataset.s)<=v)); }
starsEl.addEventListener('click',(e)=>{ const n = Number(e.target.dataset.s||0); if(n) setRate(n); });

/* ====== LEADERBOARD ====== */
function bumpScore(n){
  const u = currentUser(); if(!u) return;
  u.score = (u.score||0) + n; persistUser(u);
  let list = JSON.parse(localStorage.getItem(B_KEY)||'[]');
  const me = list.find(x=>x.id===u.id);
  if(me){ me.score=u.score; me.name=u.name; } else { list.push({id:u.id, name:u.name, score:u.score}); }
  localStorage.setItem(B_KEY, JSON.stringify(list));
  renderBoard();
}
function renderBoard(){
  const list = JSON.parse(localStorage.getItem(B_KEY)||'[]').sort((a,b)=>b.score-a.score).slice(0,10);
  const el = $('#boardList');
  if(list.length===0){ el.innerHTML = '<div class="hint">ÙØ¹Ù„Ø§Ù‹ Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ø§Ù„ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡.</div>'; return; }
  el.innerHTML = list.map((u,i)=>`<div class="row"><div>#${i+1} â€” ${escapeHtml(u.name)}</div><div>${u.score} Ø§Ù…ØªÛŒØ§Ø²</div></div>`).join('');
}

/* ====== SECRET STATS (password: anime100max) ====== */
const VIEWS_KEY='am_views';
function openSecret(){
  const pwd = prompt('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:');
  if(pwd==='anime100max'){
    $('#stats').style.display='block';
    updateStats();
    window.location.hash = '#stats';
  }else if(pwd){ alert('Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡Ù‡!'); }
}
function updateStats(){
  $('#statViews').textContent = Number(localStorage.getItem(VIEWS_KEY)||0);
  $('#statUsers').textContent = (loadUsers()||[]).length;
  const cs = loadComments();
  $('#statComments').textContent = cs.length;
  $('#statLikes').textContent = cs.reduce((a,c)=>a+(c.like||0),0);
}

/* ====== INIT ====== */
function init(){
  // view counter
  const v = Number(localStorage.getItem(VIEWS_KEY)||0)+1; localStorage.setItem(VIEWS_KEY, String(v));
  // theme
  const t = localStorage.getItem(THEME_KEY)||'dark'; applyTheme(t);
  // auth & ui pieces
  renderAuth(); renderComments(); renderBoard();
  const savedRate = Number(localStorage.getItem(R_KEY)||0); if(savedRate){ drawStars(savedRate); rateNote.textContent=`Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§: ${savedRate}/5`; }

  // prevent menu auto-close bug on first load
  $('#menu').style.display='none';
}
document.addEventListener('click', (e)=>{ if(e.target.id==='authModal') closeAuth(); if(e.target.id==='userModal') closeUserPanel(); });
document.addEventListener('DOMContentLoaded', init);
</script>
</body>
        </html>
